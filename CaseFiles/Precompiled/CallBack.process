<process name="CallBack" implementationType="http://www.omg.org/spec/CMMN/ProcessType/Unspecified">
    <input id="_rmBM_task" name="operation"/>
    <input id="_0Dqq_caseId" name="caseId"/>
    <output id="_FU0v_responseCode" name="output"/>
    <extensionElements>
        <cafienne:implementation xmlns:cafienne="org.cafienne" class="org.cafienne.processtask.implementation.http.HTTPCallDefinition" async="true">
            <url>${T(java.lang.System).getenv("TestBaseUrl")}/cmmn-wrapper?HandlerName=TestCallBack</url>
            <method>POST</method>
            <post-content>
       {
         "Task": "${operation}",
         "CaseInstanceId": "${caseId}"
       }
    </post-content>
            <http-headers>
                <http-header name="Accept">*/*</http-header>
                <http-header name="Content-Type">application/json</http-header>
            </http-headers>
            <success>
                <parameterMapping sourceRef="responsePayload" targetRef="output">
                    <transformation language="spel">
                        <body>
            map("success", true, "message", responsePayload)
          </body>
                    </transformation>
                </parameterMapping>
            </success>
            <failure>
                <parameterMapping sourceRef="responsePayload" targetRef="output">
                    <transformation language="spel">
                        <body>
            map("success", false, "message", responsePayload)
          </body>
                    </transformation>
                </parameterMapping>
            </failure>
        </cafienne:implementation>
    </extensionElements>
</process>